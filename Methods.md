Notes:
Cloud - used to refer to clusters of trees. 
Cov/Covariance - used to refer to bipartition networks
Aff/Affinity - used to refer to topological networks 

# Simulate tree sets 

Notes:
All scripts need to be in the same folder. 
All scripts were written and run in Python2.7 but should work in Python3


Python packages required:

- Dendropy v4
- BioPython
- numpy
- cStringIO

readTree.py 

- Creates clusters of trees 

makeTrees.py

- Wrapper for readTree.py, to create multiple tree sets with appropriate names. 
- Need to specify number of tips, number of replicates, number of trees per cluster in def main()

makeNexus.sh 
- Calls paup* to format nexus file
- Need to specify path to command line version of paup on your machine

asymmetrySubsample.py

- Subsamples nexus tree set files to create asymmetric clusters
- Assumes file naming and format as output by makeTrees.py
- Need to edit how many trees per cluster, suffix for the files you are sampling from, and the new name for the output file 
- A seperate script and folder is needed for each subsample ratio. 

# Run CLV Treescaper 

simSetup.py
- Creates individual folders for each tree set replicate


treeScaperWrapper.py
- Runs automatic and then manual community detection, using a maximum community limit as specified by user. 
- Requires CLVTreescaper executable and nexus file
- Can pair with other scripts to be run with gnu parallel, please email for gnu parellel scripts. 

Script-specific Output:
- Summary info about tree set and runs: _log.out
- Screen output for each run: Auto.out/Manu.out
- Plateaus found by treescaper: _Plateaus.out
- Bipartitions for each community: _CovCommunities.out
- All other output files are generated by TreeScaper

Example calls for treeScaperWrapper.py
See treeScaperWrapper.py for input flag info. 

```bash
# specify file name
f='10tip_100trees_0.125_1.0start_9_cloud.nex'
# specify path to executable
clv="./CLVTreeScaper"

#Topological network, reciprocal, unweighted, rooted
python3 treeScaperWrapper.py -c $clv -i $f -n "Affinity" -f "Both" -mc 10 -m "CPM" -w 0 -r 1 -dm "URF" -at "Rec" -s "X,1:1,X"

#Bipartition network, unweighted, rooted
python3 treeScaperWrapper.py -c $clv -i $f -n "Covariance" -f "Both" -mc 10 -m "CPM" -w 0 -r 1 -lf 0.05 -hf 0.95 -s "X,1:1,X"
```

# Calculate Accuracy

Python packages required:

- Dendropy v4
- numpy
- sklearn.metrics.cluster

accuracyCalculations.py

- Grabs needed output files from zip file. 
- Uses input nexus files and treescaper results (Manu.out, _CovCommunities.out) to calculate accuracy. 
- Uses scikitlearn to calculate: homogeneity_score, completeness_score, v_measure_score, normalized_mutual_info_score, adjusted_mutual_info_score, adjusted_rand_score


# Graph results 

All results were combined and graphed in R. 


# Data 
NumTips
NumTrees
AsymCom
AllbyAll